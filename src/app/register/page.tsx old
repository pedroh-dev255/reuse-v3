"use client";

import { useState, useEffect } from "react";
import { useRouter, usePathname } from "next/navigation";

export default function AuthPage() {
  const router = useRouter();
  const pathname = usePathname();
  const isLogin = pathname.includes("login");

  // Estado para controlar se o painel está no lado esquerdo ou direito
  const [slideRight, setSlideRight] = useState(isLogin);

  useEffect(() => {
    setSlideRight(isLogin);
  }, [isLogin]);

  // Funções para trocar a rota e disparar a animação
  function goToLogin() {
    setSlideRight(true);
    router.push("/login");
  }

  function goToRegister() {
    setSlideRight(false);
    router.push("/register");
  }

  return (
    <div className="w-screen h-screen bg-[#3f6ea4] flex items-center justify-center font-sans">
      <div className="relative w-[900px] h-[500px] rounded-[40px] overflow-hidden shadow-lg flex">

        {/* Painel branco que desliza */}
        <div
          className={`absolute top-0 bottom-0 w-[50%] bg-[#f8f5ea] rounded-[40px] transition-transform duration-700 ease-in-out ${
            slideRight ? "translate-x-[100%]" : "translate-x-0"
          }`}
          style={{ boxShadow: "inset 10px 0 30px -10px rgb(0 0 0 / 0.2)" }}
        >
          {/* Conteúdo do painel branco */}
          {slideRight ? (
            <div className="h-full flex flex-col justify-center items-center p-16 text-[#3f6ea4] select-none">
              <h2 className="text-3xl font-extrabold mb-4">
                Já é um usuário REUSE?
              </h2>
              <button
                onClick={goToLogin}
                className="mt-6 px-10 py-3 bg-[#3f6ea4] text-[#f8f5ea] font-bold rounded-lg shadow hover:bg-[#335680] transition"
              >
                Clique aqui para logar
              </button>
            </div>
          ) : (
            <div className="h-full flex flex-col justify-center items-center p-16 text-[#3f6ea4] select-none">
              <h2 className="text-3xl font-extrabold mb-4">
                É sua primeira vez na plataforma?
              </h2>
              <button
                onClick={goToRegister}
                className="mt-6 px-10 py-3 bg-[#3f6ea4] text-[#f8f5ea] font-bold rounded-lg shadow hover:bg-[#335680] transition"
              >
                Realize seu cadastro agora mesmo!
              </button>
              <p className="italic mt-4 font-semibold">Fácil e rápido!</p>
            </div>
          )}
        </div>

        {/* Conteúdo da direita (login) */}
        <div
          className={`w-1/2 h-full bg-[#31557f] text-[#f8f5ea] p-12 rounded-r-[40px] flex flex-col justify-center transition-opacity duration-700 ${
            slideRight ? "opacity-100" : "opacity-0 pointer-events-none"
          }`}
        >
          <h2 className="mb-8 text-xl font-semibold">Realize o login na plataforma!</h2>

          <label className="mb-1 text-sm">Digite seu Usuário</label>
          <input
            type="text"
            placeholder="Usuário"
            className="mb-6 rounded px-3 py-2 text-[#31557f] font-semibold"
          />

          <label className="mb-1 text-sm">Digite sua Senha</label>
          <input
            type="password"
            placeholder="Senha"
            className="mb-6 rounded px-3 py-2 text-[#31557f] font-semibold"
          />

          <a href="#" className="mb-6 text-xs underline hover:text-[#d9d9d9]">
            Esqueci minha senha
          </a>

          <button className="bg-[#f8f5ea] text-[#31557f] font-bold py-3 rounded hover:bg-[#dedbcf] transition">
            ENTRAR
          </button>

          <div className="mt-auto flex justify-between text-xs">
            <a href="#" className="underline hover:text-[#d9d9d9]">Termos de uso</a>
            <a href="#" className="underline hover:text-[#d9d9d9]">Contato</a>
          </div>
        </div>

        {/* Conteúdo da esquerda (registro) */}
        <div
          className={`w-1/2 h-full bg-[#f8f5ea] text-[#3f6ea4] p-12 rounded-l-[40px] flex flex-col justify-center transition-opacity duration-700 ${
            slideRight ? "opacity-0 pointer-events-none" : "opacity-100"
          }`}
        >
          <h2 className="mb-8 text-xl font-semibold">Crie sua conta, rapidinho.</h2>

          <label className="mb-1 text-sm">Digite seu Usuário</label>
          <input
            type="text"
            placeholder="Usuário"
            className="mb-4 rounded px-3 py-2 text-[#3f6ea4] font-semibold"
          />

          <label className="mb-1 text-sm">Digite seu melhor e-mail</label>
          <input
            type="email"
            placeholder="E-mail"
            className="mb-4 rounded px-3 py-2 text-[#3f6ea4] font-semibold"
          />

          <label className="mb-1 text-sm">Digite sua Senha</label>
          <input
            type="password"
            placeholder="Senha"
            className="mb-4 rounded px-3 py-2 text-[#3f6ea4] font-semibold"
          />

          <label className="mb-1 text-sm">Digite sua Senha novamente.</label>
          <input
            type="password"
            placeholder="Confirmar senha"
            className="mb-6 rounded px-3 py-2 text-[#3f6ea4] font-semibold"
          />

          <button className="bg-[#3f6ea4] text-[#f8f5ea] font-bold py-3 rounded hover:bg-[#335680] transition">
            CRIAR CONTA
          </button>

          <div className="mt-auto flex justify-between text-xs">
            <a href="#" className="underline hover:text-[#31557f]">Termos de uso</a>
            <a href="#" className="underline hover:text-[#31557f]">Contato</a>
          </div>
        </div>
      </div>
    </div>
  );
}
